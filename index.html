<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NetApp 디스크 사이징 계산기</title>
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#eff6ff 0%,#e0e7ff 100%);min-height:100vh;padding:24px}.container{max-width:1200px;margin:0 auto}.card{background:white;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);padding:32px;margin-bottom:24px}.header{display:flex;align-items:center;gap:12px;margin-bottom:24px}.header svg{width:32px;height:32px;color:#2563eb}.header h1{font-size:28px;font-weight:bold;color:#1f2937}.section-title{font-size:18px;font-weight:600;color:#1f2937;margin:24px 0 16px 0;padding-bottom:8px;border-bottom:2px solid #e5e7eb}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:24px}.form-group{display:flex;flex-direction:column}.form-group label{font-size:14px;font-weight:500;color:#374151;margin-bottom:8px}.form-group input,.form-group select{padding:10px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:16px;transition:all .2s}.form-group input:focus,.form-group select:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,0.1)}.btn{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:8px}.btn-primary{background:#2563eb;color:white;width:100%}.btn-primary:hover{background:#1d4ed8}.btn-success{background:#16a34a;color:white}.btn-success:hover{background:#15803d}.btn-secondary{background:#6366f1;color:white}.btn-secondary:hover{background:#4f46e5}.result-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.result-header h2{font-size:24px;font-weight:bold;color:#1f2937}.button-group{display:flex;gap:8px}.result-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.result-card{padding:16px;border-radius:8px}.result-card-label{font-size:14px;color:#6b7280;margin-bottom:4px}.result-card-value{font-size:28px;font-weight:bold}.bg-blue{background:#dbeafe}.text-blue{color:#2563eb}.bg-green{background:#dcfce7}.text-green{color:#16a34a}.bg-yellow{background:#fef3c7}.text-yellow{color:#d97706}.bg-purple{background:#f3e8ff}.text-purple{color:#9333ea}.bg-indigo{background:#e0e7ff}.text-indigo{color:#6366f1}.bg-pink{background:#fce7f3}.text-pink{color:#db2777}.bg-orange{background:#fed7aa}.text-orange{color:#ea580c}.detail-section{border-top:1px solid #e5e7eb;padding-top:24px}.detail-section h3{font-size:20px;font-weight:bold;color:#1f2937;margin-bottom:16px}.detail-row{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #e5e7eb}.detail-row:last-child{border-bottom:none}.detail-label{color:#6b7280}.detail-value{font-weight:600}.alert{margin-top:24px;background:#dbeafe;border-left:4px solid #2563eb;padding:16px;border-radius:8px;display:flex;gap:8px}.alert.alert-warning{background:#fef3c7;border-left-color:#d97706}.alert svg{width:20px;height:20px;color:#2563eb;flex-shrink:0;margin-top:2px}.alert.alert-warning svg{color:#d97706}.alert-content{color:#1e3a8a;font-size:14px}.alert.alert-warning .alert-content{color:#78350f}.alert-title{font-weight:600;margin-bottom:4px}.alert ul{list-style:disc;padding-left:20px}.alert li{margin:4px 0}.hidden{display:none}.saved-config{padding:16px;background:#f9fafb;border-radius:8px;cursor:pointer;transition:all .2s;margin-bottom:8px}.saved-config:hover{background:#f3f4f6}.saved-config-name{font-weight:600;color:#1f2937;margin-bottom:4px}.saved-config-details{font-size:14px;color:#6b7280}.icon{width:16px;height:16px}@media (max-width:768px){body{padding:16px}.card{padding:20px}.grid{grid-template-columns:1fr}.result-grid{grid-template-columns:1fr}.header h1{font-size:22px}.button-group{width:100%;flex-wrap:wrap}.btn{flex:1;min-width:120px}}</style>
</head>
<body>
<div class="container">
<div class="card">
<div class="header">
<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/></svg>
<h1>NetApp 스토리지 디스크 사이징 계산기</h1>
</div>
<div class="section-title">기본 구성</div>
<div class="grid">
<div class="form-group"><label>실 사용 가능 용량 (TB)</label><input type="number" id="targetCapacity" value="10"></div>
<div class="form-group"><label>RAID 타입</label><select id="raidType"><option value="RAID-DP">RAID-DP (2-패리티)</option><option value="RAID-TEC">RAID-TEC (3-패리티)</option><option value="RAID4">RAID4 (1-패리티)</option></select></div>
<div class="form-group"><label>디스크 타입</label><select id="diskType"><option value="SAS">SAS</option><option value="NL-SAS">NL-SAS</option><option value="SSD">SSD</option></select></div>
<div class="form-group"><label>디스크 크기 (TB)</label><select id="diskSize"><option value="1.8">1.8 TB</option></select></div>
<div class="form-group"><label>노드 수 (HA Pair)</label><input type="number" id="nodeCount" value="2" min="2" step="2"></div>
<div class="form-group"><label>Aggregate 수</label><input type="number" id="aggregateCount" value="2" min="1"></div>
<div class="form-group"><label>스페어 디스크 수 (개)</label><input type="number" id="spareDisks" value="2" min="0"></div>
</div>
<div class="section-title">Aggregate & RAID 제약사항</div>
<div class="grid">
<div class="form-group"><label>Aggregate 최소 디스크 수</label><input type="number" id="aggrMinDisks" value="8" min="1"></div>
<div class="form-group"><label>Aggregate 최대 디스크 수</label><input type="number" id="aggrMaxDisks" value="200" min="1"></div>
<div class="form-group"><label>최대 RAID 그룹 크기</label><input type="number" id="maxRaidGroupSize" value="26" min="3" max="28"></div>
</div>
<div class="section-title">스토리지 효율성</div>
<div class="grid">
<div class="form-group"><label>스냅샷 예약 공간 (%)</label><input type="number" id="snapshotReserve" value="0" min="0" max="50"></div>
<div class="form-group"><label>중복제거 비율 (배수)</label><input type="number" id="dedupeRatio" value="1" min="1" max="10" step="0.1"></div>
<div class="form-group"><label>압축 비율 (배수)</label><input type="number" id="compressionRatio" value="1" min="1" max="10" step="0.1"></div>
<div class="form-group"><label>시스템 오버헤드 (%)</label><input type="number" id="overheadPercent" value="10" min="0" max="20"></div>
</div>
<button class="btn btn-primary" onclick="calculateSizing()">사이징 계산하기</button>
</div>
<div id="results" class="card hidden">
<div class="result-header">
<h2>계산 결과</h2>
<div class="button-group">
<button class="btn btn-success" onclick="saveConfig()"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/></svg>저장</button>
<button class="btn btn-secondary" onclick="exportResults()"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>내보내기</button>
</div>
</div>
<div id="warnings"></div>
<div id="resultCards" class="result-grid"></div>
<div class="detail-section"><h3>상세 구성</h3><div id="detailResults"></div></div>
<div class="alert"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><div class="alert-content"><div class="alert-title">참고사항</div><ul><li>Root 볼륨용 디스크는 각 노드당 3개씩 자동으로 할당됩니다.</li><li>중복제거 및 압축 비율은 데이터 유형에 따라 크게 달라질 수 있습니다.</li><li>스페어 디스크는 디스크 장애 시 자동 리빌드를 위해 필수입니다.</li></ul></div></div>
</div>
<div id="savedConfigsSection" class="card hidden"><h2>저장된 구성</h2><div id="savedConfigsList" style="margin-top:16px"></div></div>
</div>
<script>const diskOptions={SAS:[1.8],'NL-SAS':[4,10,22,24],SSD:[1.92,3.84,7.6,15.3,30.7,61.4]},raidConfigs={'RAID-DP':{minDisks:5,parity:2},'RAID-TEC':{minDisks:7,parity:3},RAID4:{minDisks:3,parity:1}};let savedConfigs=[],currentResults=null;function updateDiskSizes(){const a=document.getElementById("diskType").value,b=document.getElementById("diskSize");b.innerHTML="",diskOptions[a].forEach(a=>{const c=document.createElement("option");c.value=a,c.textContent=`${a} TB`,b.appendChild(c)}),updateRecommendedRaidGroupSize()}function updateRecommendedRaidGroupSize(){const a=document.getElementById("diskType").value,b=document.getElementById("raidType").value,c=document.getElementById("maxRaidGroupSize");let d;d="SSD"===a?26:"SAS"===a?18:"NL-SAS"===a?"RAID-TEC"===b?28:16:void 0,c.dataset.userModified||(c.value=d)}document.getElementById("diskType").addEventListener("change",updateDiskSizes),document.getElementById("raidType").addEventListener("change",updateRecommendedRaidGroupSize),document.getElementById("maxRaidGroupSize").addEventListener("input",function(){this.dataset.userModified="true"});function calculateSizing(){const a={targetCapacity:parseFloat(document.getElementById("targetCapacity").value),raidType:document.getElementById("raidType").value,diskType:document.getElementById("diskType").value,diskSize:parseFloat(document.getElementById("diskSize").value),nodeCount:parseInt(document.getElementById("nodeCount").value),aggregateCount:parseInt(document.getElementById("aggregateCount").value),spareDisks:parseInt(document.getElementById("spareDisks").value),snapshotReserve:parseFloat(document.getElementById("snapshotReserve").value)/100,dedupeRatio:parseFloat(document.getElementById("dedupeRatio").value),compressionRatio:parseFloat(document.getElementById("compressionRatio").value),overheadPercent:parseFloat(document.getElementById("overheadPercent").value)/100,aggrMinDisks:parseInt(document.getElementById("aggrMinDisks").value),aggrMaxDisks:parseInt(document.getElementById("aggrMaxDisks").value),maxRaidGroupSize:parseInt(document.getElementById("maxRaidGroupSize").value)},b=raidConfigs[a.raidType],c=[],d=a.nodeCount*3,e=Math.min(a.maxRaidGroupSize,16),f=e-b.parity,g=f/e,h=a.targetCapacity/(1-a.snapshotReserve),i=h/(1-a.overheadPercent),j=i/g,k=Math.ceil(j/a.diskSize);let l=Math.ceil(k/a.aggregateCount);l<a.aggrMinDisks&&(l=a.aggrMinDisks,c.push(`Aggregate당 디스크 수가 최소값(${a.aggrMinDisks}개)보다 적어서 자동으로 조정되었습니다.`)),l>a.aggrMaxDisks&&(c.push(`⚠️ Aggregate당 디스크 수(${l}개)가 최대값(${a.aggrMaxDisks}개)을 초과합니다. Aggregate 수를 늘려야 합니다.`),l=a.aggrMaxDisks);const m=Math.min(Math.max(b.minDisks,Math.ceil(l/Math.ceil(l/a.maxRaidGroupSize))),a.maxRaidGroupSize);m<b.minDisks&&c.push(`⚠️ RAID 그룹 크기가 ${a.raidType}의 최소 요구사항(${b.minDisks}개)보다 작습니다.`);const n=Math.ceil(l/m),o=n*m,p=o*a.aggregateCount,q=p+a.spareDisks+d,r=q*a.diskSize,s=m-b.parity,t=s/m,u=p*a.diskSize*t,v=u*(1-a.overheadPercent),w=v*(1-a.snapshotReserve),x=w*a.dedupeRatio*a.compressionRatio;currentResults={inputs:a,warnings:c,totalDisks:q,rootDisks:d,spareDisks:a.spareDisks,dataDisks:p,aggregates:a.aggregateCount,disksPerAggregate:o,raidGroupsPerAggregate:n,disksPerRaidGroup:m,actualRawCapacity:r.toFixed(2),usableCapacity:v.toFixed(2),availableCapacity:w.toFixed(2),logicalCapacity:x.toFixed(2),raidEfficiency:(100*t).toFixed(1),overallEfficiency:(x/r*100).toFixed(1)},displayResults(currentResults)}function displayResults(a){document.getElementById("results").classList.remove("hidden");const b=document.getElementById("warnings");b.innerHTML=a.warnings.length>0?a.warnings.map(a=>`<div class="alert alert-warning" style="margin-bottom: 16px;"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><div class="alert-content"><div class="alert-title">경고</div><div>${a}</div></div></div>`).join(""):"";const c=[{label:"총 디스크 수",value:`${a.totalDisks}개`,bgColor:"bg-blue",textColor:"text-blue"},{label:"데이터 디스크",value:`${a.dataDisks}개`,bgColor:"bg-green",textColor:"text-green"},{label:"Root 볼륨 디스크",value:`${a.rootDisks}개`,bgColor:"bg-orange",textColor:"text-orange"},{label:"스페어 디스크",value:`${a.spareDisks}개`,bgColor:"bg-yellow",textColor:"text-yellow"},{label:"실제 Raw 용량",value:`${a.actualRawCapacity} TB`,bgColor:"bg-purple",textColor:"text-purple"},{label:"실 사용 가능 용량",value:`${a.availableCapacity} TB`,bgColor:"bg-indigo",textColor:"text-indigo"},{label:"논리적 용량",value:`${a.logicalCapacity} TB`,bgColor:"bg-pink",textColor:"text-pink"}];document.getElementById("resultCards").innerHTML=c.map(a=>`<div class="result-card ${a.bgColor}"><div class="result-card-label">${a.label}</div><div class="result-card-value ${a.textColor}">${a.value}</div></div>`).join("");const d=[{label:"노드 수",value:`${a.inputs.nodeCount}개`,highlight:!1},{label:"Aggregate 수",value:`${a.aggregates}개`,highlight:!1},{label:"Aggregate당 디스크",value:`${a.disksPerAggregate}개 (최소: ${a.inputs.aggrMinDisks}개, 최대: ${a.inputs.aggrMaxDisks}개)`,highlight:!1},{label:"Aggregate당 RAID 그룹",value:`${a.raidGroupsPerAggregate}개`,highlight:!1},{label:"RAID 그룹당 디스크",value:`${a.disksPerRaidGroup}개 (최대: ${a.inputs.maxRaidGroupSize}개)`,highlight:!1},{label:"RAID 효율성",value:`${a.raidEfficiency}%`,highlight:!1},{label:"전체 효율성",value:`${a.overallEfficiency}%`,highlight:!0}];document.getElementById("detailResults").innerHTML=d.map(a=>`<div class="detail-row"><span class="detail-label">${a.label}</span><span class="detail-value ${a.highlight?"text-green":""}">${a.value}</span></div>`).join(""),document.getElementById("results").scrollIntoView({behavior:"smooth"})}function saveConfig(){if(!currentResults)return;const a={name:`Config ${new Date().toLocaleString("ko-KR")}`,data:currentResults};savedConfigs.push(a),updateSavedConfigs(),alert("구성이 저장되었습니다!")}function updateSavedConfigs(){0===savedConfigs.length?document.getElementById("savedConfigsSection").classList.add("hidden"):(document.getElementById("savedConfigsSection").classList.remove("hidden"),document.getElementById("savedConfigsList").innerHTML=savedConfigs.map((a,b)=>`<div class="saved-config" onclick="loadSavedConfig(${b})"><div class="saved-config-name">${a.name}</div><div class="saved-config-details">목표: ${a.data.inputs.targetCapacity}TB / ${a.data.inputs.diskType} ${a.data.inputs.diskSize}TB / 디스크 ${a.data.totalDisks}개 (Root: ${a.data.rootDisks}개, 스페어: ${a.data.spareDisks}개)</div></div>`).join(""))}function loadSavedConfig(a){currentResults=savedConfigs[a].data,displayResults(currentResults)}function exportResults(){if(!currentResults)return;const a=`NetApp 스토리지 디스크 사이징 리포트
생성일시: ${new Date().toLocaleString("ko-KR")}

=== 입력 파라미터 ===
실 사용 가능 용량 (목표): ${currentResults.inputs.targetCapacity} TB
RAID 타입: ${currentResults.inputs.raidType}
디스크 타입: ${currentResults.inputs.diskType}
디스크 크기: ${currentResults.inputs.diskSize} TB
노드 수: ${currentResults.inputs.nodeCount}개
Aggregate 수: ${currentResults.inputs.aggregateCount}
스페어 디스크 수: ${currentResults.inputs.spareDisks}개
Aggregate 최소 디스크 수: ${currentResults.inputs.aggrMinDisks}개
Aggregate 최대 디스크 수: ${currentResults.inputs.aggrMaxDisks}개
최대 RAID 그룹 크기: ${currentResults.inputs.maxRaidGroupSize}개
스냅샷 예약: ${(100*currentResults.inputs.snapshotReserve).toFixed(0)}%
중복제거 비율: ${currentResults.inputs.dedupeRatio}x
압축 비율: ${currentResults.inputs.compressionRatio}x
시스템 오버헤드: ${(100*currentResults.inputs.overheadPercent).toFixed(0)}%

=== 계산 결과 ===
총 디스크 수: ${currentResults.totalDisks}개
- 데이터 디스크: ${currentResults.dataDisks}개
- Root 볼륨 디스크: ${currentResults.rootDisks}개 (노드당 3개)
- 스페어 디스크: ${currentResults.spareDisks}개

Aggregate 구성:
- Aggregate 수: ${currentResults.aggregates}개
- Aggregate당 디스크: ${currentResults.disksPerAggregate}개
- Aggregate당 RAID 그룹: ${currentResults.raidGroupsPerAggregate}개
- RAID 그룹당 디스크: ${currentResults.disksPerRaidGroup}개

용량 분석:
- 실제 Raw 용량: ${currentResults.actualRawCapacity} TB
- 사용 가능 용량 (RAID 후): ${currentResults.usableCapacity} TB
- 실 사용 가능 용량 (스냅샷 예약 후): ${currentResults.availableCapacity} TB
- 논리적 용량 (효율성 기술 적용): ${currentResults.logicalCapacity} TB

효율성:
- RAID 효율성: ${currentResults.raidEfficiency}%
- 전체 효율성: ${currentResults.overallEfficiency}%

${currentResults.warnings.length>0?"=== 경고 ===\n"+currentResults.warnings.join("\n"):""}`,b=new Blob([a],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`NetApp_사이징_리포트_${(new Date).getTime()}.txt`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),alert("리포트가 다운로드되었습니다!")}updateDiskSizes();</script>
</body>
</html>
